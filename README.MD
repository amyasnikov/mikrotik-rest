# MikroTik REST
This project consists of 2 main apps:
* **Mikrotik RESTful API server (mikrotik-rest)**. It gets REST API calls and translates it to Mikrotik API calls. It is built on top of Flask and [Connexion](https://github.com/zalando/connexion). This app requires full API specification in swagger/openapi format. The specification need to be generated by another app in this repo. 
* **OpenAPI specification generator (specgen)**. This app connects to some real MikroTik device via ssh and parse all available CLI commands using **Tab** key. It builds the tree of all availablre CLI commands and then generates an OpenAPI Specification file using Jinja2 template. Generated file then can be used in mikrotik-rest app.

## Quickstart
The easiest way to start the mikrotik-rest server is through docker.

```docker run -d -e MIKROTIK_USER=test -e MIKROTIK_PASSWD=TEST -p 8080:8080 myantt/mikrotik-rest```

Now you can open your browser at
http://localhost:8080/v1/ui/
to see the the Swagger UI. It helps to discover all available API endpoints and methods.
By default this server is using the spec generated from Mikrotik hAP Lite router. If you want some another spec, then you have generate it by yourself using **specgen**.


To run **specgen** app  you need to type the following:

```docker run --rm -it specgen 192.168.0.99 user password > /path/to/mikrotik-rest/api/spec.yaml```

In this example:
* `192.168.0.99` - MikroTik IP address
* `user` - MikroTik username
* `password` - MikroTik password
Configuration parsing may take a lot of time (10-20 mins), please be patient.



